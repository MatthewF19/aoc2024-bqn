#m ← 10‿∘⥊"..................................a....................a............................................"
#•Show m ← 12‿12⥊"....................0........0.............0........0.............A.....................................A............A.........................."
m ← >•FLines "day8.txt"
l ← ≠m

T ← {1↓∧⍷⥊𝕩} # all types of nodes present
tm ← T m

N ← {(⌊∘÷⟜l⋈l⊸|)¨/⥊m=𝕩} # node positions
nm ← N¨tm

P ← {>>¨⍷∧¨≢´¨⊸/⥊⋈⌜˜𝕩} # pairs of nodes
•Show pnm ← P¨nm

An ← (>·⋈⟜- -˝)⊸+˘ # antinodes
anm ← An¨ pnm

Tn ← {(((-⊸∾↕l)×(<-˝))+<∘⊏)𝕩} # T nodes (very wasteful)
tnm ← Tn˘¨ pnm

V ← {⊑¬1∊((0⊸>)∨(l⊸≤))𝕩} # filter for valid

# ---- Part 1 ---- #
•Show ≠⍷∾´<˘¨((V˘⊸/∾˝)¨)anm

# ---- Part 2 ---- #
•Show ≠⍷∾(V¨⊸/∾˝)¨tnm